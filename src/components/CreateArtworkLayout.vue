<template>
  <main>
    <h1 class="publish_artwork">Publiez votre oeuvre</h1>
    <!-- <p v-if="success">{{ success }}</p> -->
    <p v-for="error in errors" :key="error">{{ error }}</p>
      
    <div class="artwork">
      <label class="artwork_title">Titre de l'oeuvre :</label>
    <input v-model="title" type="text" class="artwork_champ">

    </div><br>

    

  <div class="art_form">
    <label class="art_form_title">Forme d'art :</label>
      <select v-model="tags" class="art_form_category">
        <option valeur="sculpture">Sculpture</option>
        <option valeur="peinture">Peinture</option>
        <option valeur="photographie">Photographie</option>
      </select>
  </div><br>


    <div class="description_artwok">
      <label class="description_artwork_title"> Description de l'oeuvre</label>
      <input v-model="content" type="textarea" class="description_artwork_cadr"><br>
    </div> 
  
  <div >
    <p>
      <button v-on:click="CreatePost" class="save" > Publier </button>
    </p>
  </div>
  
  </main>
</template>

<script>

 import ArtworksService from '@/services/ArtworksService.js';



export default {
  name: 'CreateArtworkLayout',
      
  data() {
    return {
      
        errors: [],
        title: null,
        tags: null,
        content: null,
        status: "publish",
        author: this.$store.state.userID,
       
    }   
    
  },
  
  
    methods: {
    CreatePost() {
        this.errors = [];
      if(!this.title) {
          this.errors.push("Title must not be empty");
      }
      if(!this.tags) {
          this.errors.push("Category must not be empty");
      }
      if(!this.content) {
          this.errors.push("Content must not be empty");
      }  

      if(!this.image) {
          this.errors.push("image must not be empty");
      }  
      

      ArtworksService.CreatePost({
        title: this.title,
        tags: this.tags,
        content: this.content,
        status: this.status,
        
        }, (error) => {
        this.errors.push(error);
      })  

    },
 
  },


  
}







</script>

<style src= "@/assets/css/publish_or_edit_your_artwork.css">

</style>

